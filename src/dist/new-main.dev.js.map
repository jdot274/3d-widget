{"version":3,"sources":["new-main.js"],"names":["scene","camera","renderer","grid","animationFrameId","mouse","THREE","Vector2","raycaster","Raycaster","hoveredChip","clock","Clock","envMap","init","console","log","Scene","background","PerspectiveCamera","window","innerWidth","innerHeight","position","z","y","lookAt","WebGLRenderer","antialias","alpha","preserveDrawingBuffer","precision","setSize","setClearColor","setClearAlpha","setPixelRatio","Math","min","devicePixelRatio","physicallyCorrectLights","undefined","sRGBEncoding","outputEncoding","ACESFilmicToneMapping","toneMapping","toneMappingExposure","createEnvironmentMap","app","document","getElementById","appendChild","domElement","setupLighting","Grid","addEventListener","onWindowResize","onMouseMove","onClick","animate","PMREMGenerator","pmremGenerator","compileEquirectangularShader","envTexture","createPremiumEnvironmentTexture","fromEquirectangular","texture","dispose","e","warn","canvas","createElement","width","height","ctx","getContext","clearRect","gradient","createRadialGradient","addColorStop","fillStyle","fillRect","globalCompositeOperation","i","x","random","radius","beginPath","arc","PI","fill","CanvasTexture","EquirectangularReflectionMapping","mapping","aspect","updateProjectionMatrix","event","clientX","clientY","setFromCamera","intersects","intersectObjects","children","length","object","userData","chip","onHover","requestAnimationFrame","time","getElapsedTime","chips","update","camX","sin","camY","cos","clear","render","cleanup","cancelAnimationFrame","removeEventListener","ambientLight","AmbientLight","add","keyLight","DirectionalLight","set","keyLight2","rimLight","pointLight1","PointLight","pointLight2"],"mappings":"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","sourcesContent":["import * as THREE from 'three';\nimport Grid from './components/Grid.js';\nimport config from './scene.config.json';\n\n// Initialize variables\nlet scene, camera, renderer, grid;\nlet animationFrameId = null;\nlet mouse = new THREE.Vector2();\nlet raycaster = new THREE.Raycaster();\nlet hoveredChip = null;\nlet clock = new THREE.Clock();\nlet envMap;\n\n// Setup and start the 3D scene\nfunction init() {\n  console.log(\"Initializing 3D scene\");\n  \n  // Create scene with transparent background\n  scene = new THREE.Scene();\n  scene.background = null; // Crucial for true transparency\n  \n  // Create camera - premium perspective\n  camera = new THREE.PerspectiveCamera(\n    40, // Lower FOV for less distortion - premium look\n    window.innerWidth / window.innerHeight, \n    0.1, \n    1000\n  );\n  camera.position.z = 7; // Slightly closer for better detail\n  camera.position.y = 1.5; // Less elevation for more straight-on view\n  camera.lookAt(0, 0, 0);\n  \n  // Setup renderer with high quality settings for premium glass\n  renderer = new THREE.WebGLRenderer({\n    antialias: true,\n    alpha: true,\n    preserveDrawingBuffer: true,\n    precision: 'highp'\n  });\n  \n  // Configure renderer for premium style with transparency\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  renderer.setClearColor(0x000000, 0); // Transparent background\n  renderer.setClearAlpha(0); // Crucial for transparency\n  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n  \n  // Enable physically correct lighting\n  if (renderer.physicallyCorrectLights !== undefined) {\n    renderer.physicallyCorrectLights = true;\n  }\n  \n  // Set output encoding for proper color reproduction\n  if (THREE.sRGBEncoding !== undefined) {\n    renderer.outputEncoding = THREE.sRGBEncoding;\n  }\n  \n  // Add tone mapping with higher contrast - premium dark look\n  if (THREE.ACESFilmicToneMapping !== undefined) {\n    renderer.toneMapping = THREE.ACESFilmicToneMapping;\n    renderer.toneMappingExposure = 0.9; // Slightly darker for premium contrast\n  }\n  \n  // Create environment map for glass reflections\n  createEnvironmentMap();\n  \n  // Make renderer available to components\n  scene.renderer = renderer;\n  scene.envMap = envMap;\n  \n  // Add renderer to DOM\n  const app = document.getElementById('app');\n  app.appendChild(renderer.domElement);\n  \n  // Set up lighting for premium glass style with dark spheres\n  setupLighting();\n  \n  // Create grid of chips\n  grid = new Grid(scene);\n  console.log(\"Grid created:\", grid);\n  \n  // Add event listeners\n  window.addEventListener('resize', onWindowResize);\n  window.addEventListener('mousemove', onMouseMove);\n  window.addEventListener('click', onClick);\n  \n  // Start animation loop\n  animate();\n}\n\n// Create environment map optimized for premium glass\nfunction createEnvironmentMap() {\n  try {\n    // Create a PMREM generator\n    if (renderer && THREE.PMREMGenerator) {\n      const pmremGenerator = new THREE.PMREMGenerator(renderer);\n      pmremGenerator.compileEquirectangularShader();\n      \n      // Create a dark, premium environment for contrasting glass panels\n      const envTexture = createPremiumEnvironmentTexture();\n      \n      // Process the environment map for PBR materials\n      envMap = pmremGenerator.fromEquirectangular(envTexture).texture;\n      \n      // Clean up\n      pmremGenerator.dispose();\n      envTexture.dispose();\n    }\n  } catch (e) {\n    console.warn('Error creating environment map:', e);\n  }\n}\n\n// Create a premium environment texture that works with transparency\nfunction createPremiumEnvironmentTexture() {\n  const canvas = document.createElement('canvas');\n  canvas.width = 2048;\n  canvas.height = 1024;\n  \n  const ctx = canvas.getContext('2d');\n  \n  // Start with transparency for background\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  \n  // Create a very subtle gradient that allows transparency\n  const gradient = ctx.createRadialGradient(\n    canvas.width/2, canvas.height/2, 0,\n    canvas.width/2, canvas.height/2, canvas.height * 0.8\n  );\n  \n  // Use very subtle colors that work with transparency\n  gradient.addColorStop(0, 'rgba(30, 30, 30, 0.1)');     // Very subtle dark center\n  gradient.addColorStop(0.3, 'rgba(20, 20, 20, 0.05)');  // Extremely subtle\n  gradient.addColorStop(0.6, 'rgba(10, 10, 10, 0.03)');  // Nearly invisible\n  gradient.addColorStop(1.0, 'rgba(0, 0, 0, 0)');        // Fully transparent at edges\n  \n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  \n  // Add subtle glow spots for glass reflections\n  ctx.globalCompositeOperation = 'lighter';\n  \n  // Add distant, subtle light sources but make them very subtle\n  for (let i = 0; i < 10; i++) { \n    const x = Math.random() * canvas.width;\n    const y = Math.random() * canvas.height;\n    const radius = 60 + Math.random() * 100;\n    const gradient = ctx.createRadialGradient(\n      x, y, 0,\n      x, y, radius\n    );\n    \n    gradient.addColorStop(0, 'rgba(255, 255, 255, 0.1)'); // Very subtle center\n    gradient.addColorStop(0.3, 'rgba(255, 255, 255, 0.03)'); // Even faster falloff\n    gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n    \n    ctx.fillStyle = gradient;\n    ctx.beginPath();\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\n    ctx.fill();\n  }\n  \n  // Reset composite operation\n  ctx.globalCompositeOperation = 'source-over';\n  \n  // Create a texture from the canvas\n  const texture = new THREE.CanvasTexture(canvas);\n  \n  // Configure for proper environment mapping\n  if (THREE.EquirectangularReflectionMapping) {\n    texture.mapping = THREE.EquirectangularReflectionMapping;\n  }\n  \n  return texture;\n}\n\n// Handle window resize\nfunction onWindowResize() {\n  camera.aspect = window.innerWidth / window.innerHeight;\n  camera.updateProjectionMatrix();\n  renderer.setSize(window.innerWidth, window.innerHeight);\n}\n\n// Handle mouse movement for hover effects\nfunction onMouseMove(event) {\n  // Calculate mouse position in normalized device coordinates (-1 to +1)\n  mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\n  mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n  \n  // Update the raycaster\n  raycaster.setFromCamera(mouse, camera);\n  \n  // Check for intersections with chips\n  const intersects = raycaster.intersectObjects(scene.children, true);\n  \n  // Reset previously hovered chip\n  if (hoveredChip && (!intersects.length || intersects[0].object.userData.chip !== hoveredChip)) {\n    hoveredChip.onHover(false);\n    hoveredChip = null;\n  }\n  \n  // Set new hovered chip\n  if (intersects.length > 0) {\n    const chip = intersects[0].object.userData.chip;\n    if (chip && chip !== hoveredChip) {\n      hoveredChip = chip;\n      hoveredChip.onHover(true);\n    }\n  }\n}\n\n// Handle click events\nfunction onClick() {\n  if (hoveredChip) {\n    hoveredChip.onClick();\n  }\n}\n\n// Animation loop - modify for premium animation style\nfunction animate() {\n  animationFrameId = requestAnimationFrame(animate);\n  \n  // Get animation time\n  const time = clock.getElapsedTime();\n  \n  // Update grid\n  if (grid && grid.chips) {\n    for (const chip of grid.chips) {\n      chip.update(time);\n    }\n  }\n  \n  // Extremely subtle camera movement - premium UI has minimal movement\n  const camX = Math.sin(time * 0.07) * 0.03; // Very subtle x movement\n  const camY = Math.cos(time * 0.05) * 0.03 + 1.5; // Maintain near-stable position\n  camera.position.x = camX;\n  camera.position.y = camY;\n  camera.position.z = 7; // Keep z stable for premium look\n  camera.lookAt(0, 0, 0);\n  \n  // Clear with transparency\n  renderer.setClearColor(0x000000, 0);\n  renderer.setClearAlpha(0);\n  renderer.clear();\n  \n  // Render scene\n  renderer.render(scene, camera);\n}\n\n// Clean up resources\nfunction cleanup() {\n  if (animationFrameId) {\n    cancelAnimationFrame(animationFrameId);\n  }\n  \n  window.removeEventListener('resize', onWindowResize);\n  window.removeEventListener('mousemove', onMouseMove);\n  window.removeEventListener('click', onClick);\n  \n  if (grid) {\n    grid.dispose();\n  }\n  \n  if (renderer) {\n    renderer.dispose();\n  }\n  \n  if (envMap) {\n    envMap.dispose();\n  }\n}\n\n// Carefully designed lighting setup optimized for premium glassmorphism with transparency\nfunction setupLighting() {\n  // Subtle ambient light for premium glass with transparency\n  const ambientLight = new THREE.AmbientLight(0xffffff, 0.4); // Moderate ambient for transparency\n  scene.add(ambientLight);\n  \n  // Main key light - subtle highlights for glass edges with transparency\n  const keyLight = new THREE.DirectionalLight(0xffffff, 0.6); // Slightly reduced for transparency\n  keyLight.position.set(3, 5, 4);\n  scene.add(keyLight);\n  \n  // Secondary key light for balance\n  const keyLight2 = new THREE.DirectionalLight(0xffffff, 0.4);\n  keyLight2.position.set(-4, 3, 4);\n  scene.add(keyLight2);\n  \n  // Rim light - subtle edge definition\n  const rimLight = new THREE.DirectionalLight(0xffffff, 0.2); // Reduced for transparency\n  rimLight.position.set(0, -4, 2);\n  scene.add(rimLight);\n  \n  // Add subtle point lights for specular highlights on glass and spheres\n  const pointLight1 = new THREE.PointLight(0xffffff, 0.2, 10); // Reduced for transparency\n  pointLight1.position.set(2, 3, 4);\n  scene.add(pointLight1);\n  \n  const pointLight2 = new THREE.PointLight(0xffffff, 0.15, 8); // Reduced for transparency\n  pointLight2.position.set(-3, -2, 3);\n  scene.add(pointLight2);\n}\n\n// Initialize\ninit();\n\n// Handle cleanup when window is closed\nwindow.addEventListener('beforeunload', cleanup); "],"file":"new-main.dev.js"}